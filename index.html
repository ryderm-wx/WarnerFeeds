<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Warning Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  </head>
  <body>
    <div class="content">
      <div class="container">
        <button id="toggleSlider" onclick="toggleslider()">
          Toggle Dashboard
        </button>
        <div class="logo-container">
          <img src="Logo.png" alt="Logo" class="logo" id="pulseLogo" />
        </div>
        <div id="alertDetailModal" class="modal hidden">
          <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <h2 id="alertTitle"></h2>
            <p id="alertDescription"></p>

            <pre id="rawTextBlock" class="description-text"></pre>

            <p>
              <strong>Max Wind Gust:</strong> <span id="maxWindGust"></span>
            </p>
            <p>
              <strong>Max Hail Size:</strong> <span id="maxHailSize"></span>
            </p>
            <p>
              <strong>Tornado Detection:</strong>
              <span id="tornadoDetection"></span>
            </p>
            <p>
              <strong>Tornado Damage Threat:</strong>
              <span id="tornadoDamageThreat"></span>
            </p>
            <p><strong>Expires:</strong> <span id="expires"></span></p>

            <div id="polygonContainer"></div>
          </div>
        </div>
        <div id="sliderContainer" class="slider-container">
          <div class="warning-counts" id="warningCounts">
            <div id="tornadoCount" class="warning-count tornado-count">
              TORNADO WARNINGS: 0
            </div>
            <div
              id="thunderstormCount"
              class="warning-count thunderstorm-count"
            >
              SEVERE THUNDERSTORM WARNINGS: 0
            </div>
            <div id="floodCount" class="warning-count flood-count">
              FLASH FLOOD WARNINGS: 0
            </div>
            <div
              id="winterWeatherCount"
              class="warning-count winter-weather-count"
            >
              WINTER WEATHER WARNINGS: 0
            </div>
          </div>

          <div id="warningList" class="warning-list"></div>

          <div class="test-buttons" id="testButtons">
            <h3>Test Notifications</h3>
            <div
              class="category-divider"
              data-category="Warning Upgrades"
            ></div>
            <div class="button-group">
              <button
                class="tornado-special"
                onclick="testUpgradeNotification('PDS Tornado Warning')"
              >
                Test Tornado Warning Upgrade
              </button>

              <button
                class="thunderstorm"
                onclick="testUpgradeNotification('Considerable Severe Thunderstorm Warning')"
              >
                Test Severe Thunderstorm Warning Upgrade
              </button>
            </div>
            <div
              class="category-divider"
              data-category="Tornado Warnings"
            ></div>
            <div class="button-group">
              <button
                class="tornado"
                onclick="testNotification('Tornado Warning')"
              >
                Test Tornado Warning (Radar Indicated)
              </button>
              <button
                class="tornado-special"
                onclick="testNotification('Radar Confirmed Tornado Warning')"
              >
                Test Radar Confirmed Tornado Warning
              </button>
              <button
                class="tornado-special"
                onclick="testNotification('Spotter Confirmed Tornado Warning')"
              >
                Test Spotter Confirmed Tornado Warning
              </button>
              <button
                class="tornado-special"
                onclick="testNotification('Law Enforcement Confirmed Tornado Warning')"
              >
                Test Law Enforcement Confirmed Tornado Warning
              </button>
              <button
                class="tornado-special"
                onclick="testNotification('Observed Tornado Warning')"
              >
                Test Observed Tornado Warning
              </button>
              <button
                class="tornado-special"
                onclick="testNotification('PDS Tornado Warning')"
              >
                Test PDS Tornado Warning
              </button>
              <button
                class="tornado-emergency"
                onclick="testNotification('Tornado Emergency')"
              >
                Test Tornado Emergency
              </button>
            </div>

            <div
              class="category-divider"
              data-category="Thunderstorm Warnings"
            ></div>
            <div class="button-group">
              <button
                class="thunderstorm"
                onclick="testNotification('Severe Thunderstorm Warning')"
              >
                Test Severe Thunderstorm Warning
              </button>
              <button
                class="thunderstorm"
                onclick="testNotification('Considerable Severe Thunderstorm Warning')"
              >
                Test Considerable Severe T-Storm Warning
              </button>
              <button
                class="thunderstorm"
                onclick="testNotification('Destructive Severe Thunderstorm Warning')"
              >
                Test Destructive Severe Thunderstorm Warning
              </button>
            </div>

            <div class="category-divider" data-category="Flood Warnings"></div>
            <div class="button-group">
              <button
                class="flood"
                onclick="testNotification('Flash Flood Warning')"
              >
                Test Flash Flood Warning
              </button>
              <button
                class="flood"
                onclick="testNotification('Flood Warning')"
              >
                Test Flood Warning
              </button>
              <button
                class="flood"
                onclick="testNotification('Flood Watch')"
              >
                Test Flood Watch
              </button>
              <button
                class="flood"
                onclick="testNotification('Flood Advisory')"
              >
                Test Flood Advisory
              </button>
              <button
                class="flood"
                onclick="testNotification('Considerable Flash Flood Warning')"
              >
                Test Considerable Flash Flood Warning
              </button>
              <button
                class="flood-emergency"
                onclick="testNotification('Flash Flood Emergency')"
              >
                Test Flash Flood Emergency
              </button>
            </div>

            <div class="category-divider" data-category="Weather Watches"></div>
            <div class="button-group">
              <button
                class="tornado-watch"
                onclick="testNotification('Tornado Watch')"
              >
                Test Tornado Watch
              </button>
              <button
                class="watch"
                onclick="testNotification('Severe Thunderstorm Watch')"
              >
                Test Severe Thunderstorm Watch
              </button>
            </div>

            <div class="category-divider" data-category="Winter Weather"></div>
            <div class="button-group">
              <button
                class="winter"
                onclick="testNotification('Winter Weather Advisory')"
              >
                Test Winter Weather Advisory
              </button>
              <button
                class="winter"
                onclick="testNotification('Winter Storm Watch')"
              >
                Test Winter Storm Watch
              </button>
              <button
                class="winter-warning"
                onclick="testNotification('Winter Storm Warning')"
              >
                Test Winter Storm Warning
              </button>
              <button
                class="ice"
                onclick="testNotification('Ice Storm Warning')"
              >
                Test Ice Storm Warning
              </button>
              <button
                class="winter-blizzard"
                onclick="testNotification('Blizzard Warning')"
              >
                Test Blizzard Warning
              </button>
              <button
                class="snow-squall"
                onclick="testNotification('Snow Squall Warning')"
              >
                Test Snow Squall Warning
              </button>
              <button
                class="frost"
                onclick="testNotification('Frost Advisory')"
              >
                Test Frost Advisory
              </button>
              <button
                class="freeze-watch"
                onclick="testNotification('Freeze Watch')"
              >
                Test Freeze Watch
              </button>
              <button
                class="freeze-warning"
                onclick="testNotification('Freeze Warning')"
              >
                Test Freeze Warning
              </button>
            </div>

            <div class="category-divider" data-category="Heat Alerts"></div>
            <div class="button-group">
              <button
                class="heat"
                onclick="testNotification('Extreme Heat Warning')"
              >
                Test Extreme Heat Warning
              </button>
              <button
                class="heat"
                onclick="testNotification('Extreme Heat Watch')"
              >
                Test Extreme Heat Watch
              </button>
              <button class="heat" onclick="testNotification('Heat Advisory')">
                Test Heat Advisory
              </button>
            </div>

            <div class="category-divider" data-category="Other Alerts"></div>
            <div class="button-group">
              <button
                class="special"
                onclick="testNotification('Special Weather Statement')"
              >
                Test Special Weather Statement
              </button>
              <button
                class="wind"
                onclick="testNotification('High Wind Warning')"
              >
                Test High Wind Warning
              </button>
              <button
                class="wind"
                onclick="testNotification('High Wind Watch')"
              >
                Test High Wind Watch
              </button>
              <button class="wind" onclick="testNotification('Wind Advisory')">
                Test Wind Advisory
              </button>
              <button
                class="fog"
                onclick="testNotification('Dense Fog Advisory')"
              >
                Test Dense Fog Advisory
              </button>
            </div>

            <div class="category-divider" data-category="Test Functions"></div>
            <div class="button-group">
              <button class="test-recent" onclick="testMostRecentAlert()">
                Test Most Recent Alert
              </button>
            </div>
          </div>
          <div class="button-group">
            <button class="test-recent" onclick="testMostRecentAlert()">
              Test Most Recent Alert
            </button>
          </div>
          <!-- Existing content -->
          <button id="customizeButton">Customize</button>
          <div id="customizationPanel" class="hidden">
            <label for="logoInput">Upload Logo:</label>
            <input type="file" id="logoInput" accept="image/*" /><br />

            <label for="alertTextInput">Custom Alert Text:</label>
            <input
              type="text"
              id="alertTextInput"
              placeholder="Enter custom text"
            /><br />

            <label for="alertBarColor">Alert Bar Color:</label>
            <input type="color" id="alertBarColor" /><br />

            <label for="eventTypeBarColor">Event Type Bar Color:</label>
            <input type="color" id="eventTypeBarColor" /><br />

            <label for="fontInput">Upload Font (Coming Soon):</label>
            <!-- <input type="file" id="fontInput" accept=".ttf, .otf" /><br /> -->

            <label for="timeoutSlider">Timeout Duration (seconds):</label>
            <input
              type="range"
              id="timeoutSlider"
              min="3"
              max="30"
              value="10"
            /><br />

            <button id="saveSettingsButton">Save Settings</button>
          </div>
          <!-- ===== SPC / CONDITIONS TOGGLE =================================== -->
          <div class="spc-toggle-container">
            <label class="switch" for="spcModeToggle">
              <input
                type="checkbox"
                id="spcModeToggle"
                title="Toggle SPC Mode"
              />
              <span class="slider round"></span>
              <span class="visually-hidden">Toggle SPC Mode</span>
            </label>
          </div>

          <div class="container">
            <div class="custom-alert-builder">
              <h3>Build Your Own Custom Alert</h3>
              <label for="alertType">Select Event Type:</label>
              <select id="alertType">
                <option value="Tornado Warning">Tornado Warning</option>
                <option value="Observed Tornado Warning">
                  Observed Tornado Warning
                </option>
                <option value="PDS Tornado Warning">PDS Tornado Warning</option>
                <option value="Tornado Emergency">Tornado Emergency</option>
                <option value="Severe Thunderstorm Warning">
                  Severe Thunderstorm Warning
                </option>
                <option value="Considerable Severe T-Storm Warning">
                  Considerable Severe T-Storm Warning
                </option>
                <option value="Destructive Severe Thunderstorm Warning">
                  Destructive Severe Thunderstorm Warning
                </option>
                <option value="Tornado Watch">Tornado Watch</option>
                <option value="Severe Thunderstorm Watch">
                  Severe Thunderstorm Watch
                </option>
                <option value="Winter Weather Advisory">
                  Winter Weather Advisory
                </option>
                <option value="Winter Storm Warning">
                  Winter Storm Warning
                </option>
                <option value="Winter Storm Watch">Winter Storm Watch</option>

                <option value="Special Weather Statement">
                  Special Weather Statement
                </option>
                <option value="Ice Storm Warning">Ice Storm Warning</option>
                <option value="Blizzard Warning">
                  Blizzard Warning
                </option></select
              ><br /><br />

              <label for="detection">Detection Type:</label>
              <select id="detection">
                <option value="Radar Indicated">Radar Indicated</option>
                <option value="Observed">Observed</option></select
              ><br /><br />

              <label for="damageThreat">Damage Threat:</label>
              <select id="damageThreat">
                <option value="NONE">None</option>
                <option value="CONSIDERABLE">Considerable</option>
                <option value="DESTRUCTIVE">Destructive</option>
                <option value="CATASTROPHIC">Catastrophic</option></select
              ><br /><br />

              <label for="countiesInput"
                >Enter Counties (comma separated):</label
              >
              <input
                type="text"
                id="countiesInput"
                placeholder="e.g., County1, County2"
              /><br /><br />

              <label for="expiration">Expiration Time (in minutes):</label>
              <input
                type="number"
                id="expiration"
                placeholder="e.g., 60"
                value="30"
              /><br /><br />

              <button id="generateAlertButton">Generate Alert</button>
            </div>
          </div>

          <div class="checkbox-section">
            <h3>Select Alerts to Show:</h3>
            <div id="checkboxContainer" class="checkbox-container"></div>
            <br />
            <div class="state-controls">
              <label for="stateInput"
                >State Warnings (US for all US alerts):</label
              ><br />
              <input type="text" id="stateInput" placeholder="e.g., OK" /><br />
              <button id="saveStateButton">Listen For Warnings</button><br />
              <button id="saveButton">
                Begin Fetching Warnings from NWS API (Slower, More Reliable)</button
              ><br />
              <button id="tacticalModeButton">
                Begin Listening for ALL US Alerts</button
              ><br />
              <button id="clearWarningsButton">
                Clear All Warnings (Use for Test Notifications Only!)
              </button>
            </div>
          </div>

          <div id="Central/Eastern Switch">
            <button id="toggleTimeZone" onclick="toggleTimeZone()">
              Switch to Central Time
            </button>
          </div>

          <div id="customWarningContainer" class="hidden">
            <button id="singleNotificationToggleButton">
              Enable Single Notification Que (Enable AFTER Loading Warnings)
            </button>
            <label>
              <input type="checkbox" id="testMessageCheckbox" />
              Dev Purposes Only - Show 'THIS IS A TEST MESSAGE' At the Top of a
              Notification - This Will Show on ANY Notification that pops up if
              enabled. </label
            ><br />
            <div>
              <h3>Custom Warning Input</h3>
              <input
                type="text"
                id="customWarningInput"
                placeholder="Paste your warning here"
              />
              <button id="testCustomWarningButton">Test Custom Warning</button>
            </div>
          </div>
        </div>
        <div class="active-alerts-box">LOADING...</div>
        <div class="semicircle">
          <div class="time-date" id="clockDisplay"></div>
        </div>
        <div class="rounded-info-box"></div>

        <div class="bottom-bar">
          <div class="left-section">
            <span id="ActiveAlertText">Loading...</span>
            <div id="eventType" class="event-type-bar">EVENT TYPE</div>
          </div>
          <div id="counties" class="counties-bar fade">COUNTIES</div>
          <div id="expiration" class="expiration-bar">Expiration Time</div>
        </div>
        <div class="black-bar"></div>
        <div id="alertBar" class="alert-bar">
          <span id="highestAlertText">LOADING...</span>
        </div>
      </div>
    </div>

    <script src="script.js"></script>

    <script
      src="https://unpkg.com/@xmpp/client@0.13.4/dist/xmpp.min.js"
      crossorigin
    ></script>

    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
  </body>
</html>
